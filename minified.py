exec("""M='pip'~F='PATH'~import venv,sys,inspect as N~from subprocess import check_call as O,getoutput as G~from os.path import realpath as C,dirname as P,join as D,basename as H,isdir,splitext as Q~from os import environ as A,execvp as R~I=next(reversed(N.stack())).frame~E=C(I.f_globals['__file__'])~S=P(E)~T=Q(H(E))[0]~B=D(S,f".{T}.venv")~if not isdir(B):A['P']=F;venv.create(B,with_pip=True)~J=D(B,'bin')~K=C(sys.executable)~if K!=C(D(J,H(K))):A.update({'VIRTUAL_ENV':B,F:f"{J}:{A[F]}"});R(E,sys.argv)~L=I.f_locals['deps']~[O([M,'install',*(B)])for B in(('--upgrade',M,'setuptools','wheel'),L)if'P'in A]~U=G('pip freeze').split()~[G('pip install '+A)for A in L if A not in U]""".replace("~","\n"))